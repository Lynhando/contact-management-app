(()=>{"use strict";var e={694:e=>{e.exports=JSON.parse('[{"id":1,"name":"Do Ly Nhan","email":"nhan.dol@one-line.com","phone":"0123456789","address":"Da Nang","typeId":1},{"id":2,"name":"Tran Thi Dieu Linh","email":"linh.trantd@one-line.com","phone":"0123456789","address":"Hue","typeId":2}]')}},t={};function n(d){var o=t[d];if(void 0!==o)return o.exports;var r=t[d]={exports:{}};return e[d](r,r.exports,n),r.exports}(()=>{class e{constructor(e,t,n,d,o,r){this.id=e,this.name=t,this.email=n,this.phone=d,this.address=o,this.typeId=r}get $id(){return this.id}get $name(){return this.name}get $email(){return this.email}get $phone(){return this.phone}get $address(){return this.address}get $typeId(){return this.typeId}set $id(e){this.id=e}set $name(e){this.name=e}set $email(e){this.email=e}set $phone(e){this.phone=e}set $address(e){this.address=e}set $typeId(e){this.typeId=e}}const t=(e,t)=>e&&e.length?e:(localStorage.setItem("contacts",JSON.stringify(t)),t),d=e=>{const t=document.querySelector(".edit-form");t.elements.name.value=`${e.name}`,t.elements.email.value=`${e.email}`,t.elements.phone.value=`${e.phone}`,t.elements.address.value=`${e.address}`;const n=document.querySelector("#contactFormId");n.innerHTML="",n.appendChild(document.createTextNode(`${e.id}`)),n.hidden=!0,document.querySelectorAll("#editComboboxContact option").forEach((e=>e.removeAttribute("selected"))),document.querySelector(`#editComboboxContact option[id="${e.typeId}"]`).setAttribute("selected","selected")},o=n(694),r=JSON.parse(localStorage.getItem("contacts"));(e=>{const t=document.querySelector("#listContact tbody");t.innerHTML="";let n=0;e.forEach((e=>{const o=document.createElement("tr");Object.keys(e).forEach((t=>{const d=document.createElement("td"),r=document.createTextNode("id"===t?""+ ++n:e[t]);d.appendChild(r),"typeId"==t&&(d.hidden=!0),o.appendChild(d)}));const r=document.createElement("td"),a=document.createElement("button");a.setAttribute("id",e.id),a.setAttribute("class","btn btn-primary btn-xs edit"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#edit");const c=document.createElement("span");c.setAttribute("class","ti-pencil"),a.appendChild(c),r.appendChild(a),a.addEventListener("click",(t=>d(e))),o.appendChild(r);const s=document.createElement("td"),l=document.createElement("button");l.setAttribute("id",e.id),l.setAttribute("class","btn btn-danger btn-xs delete"),l.setAttribute("data-toggle","modal"),l.setAttribute("data-target","#delete"),l.addEventListener("click",(t=>function(e){const t=document.querySelector("#delFormId");t.innerHTML="",t.appendChild(document.createTextNode(`${e}`)),t.hidden=!0}(e.id)));const i=document.createElement("span");i.setAttribute("class","ti-trash"),l.appendChild(i),s.appendChild(l),o.appendChild(s),null==t||t.appendChild(o)}))})(t(r,o));const a=document.querySelector(".add-form"),c=document.querySelector(".edit-form"),s=document.querySelector("#comboboxContact");a.addEventListener("submit",(n=>{n.preventDefault();let r=!1;if(document.querySelectorAll(".add-form .form-group").forEach(((e,t)=>{const n=e.getElementsByTagName("label")[1];"error"==(null==n?void 0:n.className)&&n.innerHTML&&(r=!0),!1===r&&t==document.querySelectorAll(".add-form .form-group").length-1&&(document.querySelectorAll("input").forEach((e=>e.value="")),document.querySelector("textarea").value="")})),!r){const n=JSON.parse(localStorage.getItem("contacts")),r=t(n,o),c=new FormData(a),l=c.get("name"),i=c.get("email"),m=c.get("phone"),u=c.get("address"),p=s.selectedIndex,h=s.options[p],b=Number(h.getAttribute("id"));l&&i&&m&&u&&((t,n,o,r,a,c)=>{const s=c.length?c.length+1:1,l=new e(s,t,n,o,r,a),i=document.querySelector("#typeContact"),m=i.selectedIndex,u=i.options[m].getAttribute("id");if(`${a}`===u||!u){const e=document.querySelector("#listContact tbody"),t=e.childNodes.length+1,n=document.createElement("tr");Object.keys(l).forEach((e=>{let d=document.createElement("td"),o=document.createTextNode("id"===e?t:l[e]);d.appendChild(o),"typeId"===e&&(d.hidden=!0),n.appendChild(d)}));const o=document.createElement("td"),r=document.createElement("button");r.setAttribute("class","btn btn-primary btn-xs edit"),r.setAttribute("data-toggle","modal"),r.setAttribute("data-target","#edit");const a=document.createElement("span");a.setAttribute("class","ti-pencil"),r.appendChild(a),o.appendChild(r),r.addEventListener("click",(e=>d(l))),n.appendChild(o);const c=document.createElement("td"),s=document.createElement("button");s.setAttribute("class","btn btn-danger btn-xs delete"),s.setAttribute("data-toggle","modal"),s.setAttribute("data-target","#delete");const i=document.createElement("span");i.setAttribute("class","ti-trash"),s.appendChild(i),c.appendChild(s),n.appendChild(c),null==e||e.appendChild(n)}c.push(l),localStorage.setItem("contacts",JSON.stringify(c))})(l,i,m,u,b,r)}}));const l=document.querySelector("#editComboboxContact");c.addEventListener("submit",(n=>{n.preventDefault();let d=!1;if(document.querySelectorAll(".edit-form label").forEach((e=>{"error"===e.className&&e.innerHTML&&(d=!0)})),!d){const n=JSON.parse(localStorage.getItem("contacts")),d=t(n,o),r=new FormData(c),a=r.get("name"),s=r.get("email"),i=r.get("phone"),m=r.get("address"),u=l.selectedIndex,p=l.options[u],h=Number(p.getAttribute("id")),b=document.querySelector("#contactFormId"),g=Number(b.innerHTML.trim());a&&s&&i&&m&&((t,n,d,o,r,a,c)=>{const s=new e(t,n,d,o,r,a),l=c.findIndex((e=>e.id===t));c.splice(l,1,s),localStorage.setItem("contacts",JSON.stringify(c)),location.reload()})(g,a,s,i,m,h,d)}})),document.querySelector("#deleteForm").addEventListener("click",(e=>{const t=document.querySelector("#delFormId"),n=Number(t.innerHTML.trim());let d=localStorage.getItem("contacts")?JSON.parse(localStorage.getItem("contacts")):[];const o=d.findIndex((e=>e.id===n));d.splice(o,1),localStorage.setItem("contacts",JSON.stringify(d)),location.reload()}))})()})();